<!DOCTYPE html>
<html>
  <head>
    <title>Todo App</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
  </head>

  <body class="bg-gray-100 min-h-screen font-sans">
    <% if controller_name.in?(["sessions", "registrations", "passwords"]) %>
      <!-- Centered small card for login/register -->
      <div class="flex items-center justify-center min-h-screen">
        <div class="bg-white p-6 rounded-lg shadow-md w-full max-w-xs">
          <h2 class="text-2xl font-bold mb-4 text-center"><%= controller_name.humanize %></h2>
          <%= yield %>
        </div>
      </div>
    <% else %>
      <!-- Main App Layout -->
      <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r shadow-sm p-4 flex flex-col">
          <h1 class="text-2xl font-bold mb-6">Todo Lists</h1>
          <nav class="flex flex-col space-y-2">
            <a href="#" class="text-gray-700 hover:bg-gray-200 rounded p-2">Home</a>
          </nav>
          <div class="mt-auto">
            <% if user_signed_in? %>
              <p class="mt-4 text-gray-600">Hello, <%= current_user.email %></p>
              <%= form_with url: destroy_user_session_path, method: :delete, local: true do %>
                <button type="submit" class="text-red-500 hover:text-red-700 mt-2 w-full text-left p-2 bg-transparent border-0 cursor-pointer">
                  Logout
                </button>
              <% end %>
            <% else %>
              <%= link_to "Login", new_user_session_path, class: "text-blue-500 hover:text-blue-700 block mt-2" %>
              <%= link_to "Register", new_user_registration_path, class: "text-green-500 hover:text-green-700 block mt-2" %>
            <% end %>
          </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6">
          <% if notice %>
            <div class="bg-green-200 text-green-800 p-2 mb-4 rounded">
              <%= notice %>
            </div>
          <% end %>
          <% if alert %>
            <div class="bg-red-200 text-red-800 p-2 mb-4 rounded">
              <%= alert %>
            </div>
          <% end %>
          <%= yield %>
        </main>
      </div>
    <% end %>
  </body>
</html>
